# PassageProbe

This Python script creates an efficient semantic search system over a directory of text files using SQLite and vector embeddings generated by [SentenceTransformers](https://www.sbert.net/). It indexes textual data and allows you to search semantically (by meaning) rather than just using simple keyword matching.

---

## Overview

- **Semantic Indexing:** Reads text files from a directory, splits them into chunks, computes embeddings with SentenceTransformers, and stores them in a SQLite database with the [`sqlite_vec`](https://github.com/asg017/sqlite-vss) extension.
- **Semantic Search:** Retrieves the most semantically relevant text chunks from indexed files given a natural language query.

---

## Features

- **Fast Semantic Retrieval:** Quickly retrieve semantically relevant text from numerous documents.
- **Incremental Indexing:** Indexes only new files upon each run.
- **Customizable Parameters:** Configure the embedding model, chunk sizes, overlap, and file filtering.

---

## Installation

### 1. Clone the repository

```bash
git clone https://github.com/dungeonsanddifference/passage-probe.git
cd passage-probe
```

### 2. Setup Environment with `uv`

Ensure you have `uv` installed. If not, install via your package manager of choice or:

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

Set up a virtual environment and dependencies with `uv`:

```bash
uv venv
source .venv/bin/activate
uv pip install sentence-transformers sqlite-vec tqdm
```

## Usage

Run indexing and interactive semantic search with:

```bash
uv run main.py
```

### Interactive Search

* Enter a natural language query when prompted.
* Results displayed by semantic relevance.

Example:

```
Query (blank to quit) > What is semantic indexing?

Top results:

[1] /path/to/docs/semantic_search.md#chunk3 (dist=0.1234)
    Semantic indexing refers to indexing documents based on meaning rather than exact keywords. It leverages vector embeddings to represent texts semantically…

[2] /path/to/articles/nlp_overview.txt#chunk0 (dist=0.1567)
    In natural language processing, semantic indexing is essential for retrieving relevant documents based on meaning instead of keyword frequency…
```

Press `Enter` without typing anything to exit.

## Configuration

Adjust indexing and search parameters in `settings.toml`

